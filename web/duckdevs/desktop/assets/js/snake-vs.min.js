var canvas=document.getElementById("game"),context=canvas.getContext("2d"),grid=16,count=0,snake={x:160,y:160,dx:grid,dy:0,cells:[],maxCells:4};"1"===localStorage.ddrwinner?(document.getElementById("win").innerHTML="Goose got your bread again!",document.getElementById("textdoc").innerHTML="Play again to get bread back or quit!"):(document.getElementById("win").innerHTML="Goose got your bread!",document.getElementById("textdoc").innerHTML="Play game to get bread back or quit!"),sessionStorage.ddrloseagain=1;var apple={x:320,y:320};function getRandomInt(min,max){return Math.floor(Math.random()*(max-min))+min}function loop(){requestAnimationFrame(loop),++count<4||(count=0,context.clearRect(0,0,canvas.width,canvas.height),snake.x+=snake.dx,snake.y+=snake.dy,snake.x<0?snake.x=canvas.width-grid:snake.x>=canvas.width&&(snake.x=0),snake.y<0?snake.y=canvas.height-grid:snake.y>=canvas.height&&(snake.y=0),snake.cells.unshift({x:snake.x,y:snake.y}),snake.cells.length>snake.maxCells&&snake.cells.pop(),context.fillStyle="red",context.fillRect(apple.x,apple.y,grid-1,grid-1),context.fillStyle="green",snake.cells.forEach((function(cell,index){context.fillRect(cell.x,cell.y,grid-1,grid-1),cell.x===apple.x&&cell.y===apple.y&&(snake.maxCells++,apple.x=getRandomInt(0,25)*grid,apple.y=getRandomInt(0,25)*grid);for(var i=index+1;i<snake.cells.length;i++)cell.x===snake.cells[i].x&&cell.y===snake.cells[i].y&&(snake.x=160,snake.y=160,snake.cells=[],snake.maxCells=4,snake.dx=grid,snake.dy=0,apple.x=getRandomInt(0,25)*grid,apple.y=getRandomInt(0,25)*grid,document.getElementById("win").innerHTML="You lost, the Goose got your bread!",document.getElementById("textdoc").innerHTML="You lost, try again or quit!",sessionStorage.ddrloseagain<93?(document.getElementById("win").innerHTML="You lost again, the Goose got your bread again!",document.getElementById("textdoc").innerHTML="You lost again, try again or quit!"):(document.getElementById("win").innerHTML="You unlocked a secret!",document.getElementById("textdoc").innerHTML="Now it's time for a secret seconds!",document.location.href="https://serversmp.xyz/web/duckdevs/desktop/assets/page/redirect.html"),sessionStorage.ddrloseagain?sessionStorage.ddrloseagain=Number(sessionStorage.ddrloseagain)+1:sessionStorage.ddrloseagain=1);20===snake.maxCells&&(localStorage.ddrwinner?localStorage.ddrwinner=2:localStorage.ddrwinner=1,document.location.href="https://serversmp.xyz/web/duckdevs/desktop/bread.html")})))}document.addEventListener("keydown",(function(e){37===e.which&&0===snake.dx?(snake.dx=-grid,snake.dy=0):38===e.which&&0===snake.dy?(snake.dy=-grid,snake.dx=0):39===e.which&&0===snake.dx?(snake.dx=grid,snake.dy=0):40===e.which&&0===snake.dy&&(snake.dy=grid,snake.dx=0)})),requestAnimationFrame(loop);